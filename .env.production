# Portfolix Compass Backend - Production Environment Configuration
# SECURITY: Keep all production credentials in GitHub Actions Secrets or CI/CD vault
# DO NOT commit production credentials to version control
# This file contains placeholder values - replace with actual production values

# ============================================
# Server Configuration
# ============================================
NODE_ENV=production
PORT=5000
API_URL=https://api.portfolix.in

# ============================================
# Database Configuration (MongoDB Atlas)
# ============================================
# CRITICAL: Use MongoDB Atlas connection string with SSL
MONGODB_URI=mongodb+srv://USERNAME:PASSWORD@cluster0.xxxxx.mongodb.net/portfolix-compass?retryWrites=true&w=majority&ssl=true

# ============================================
# Authentication & Security
# ============================================
# CRITICAL: Use strong, random values in production
JWT_SECRET=REPLACE_WITH_SECURE_RANDOM_KEY_MIN_32_CHARS
JWT_EXPIRY=24h
REFRESH_TOKEN_EXPIRY=7d
BCRYPT_ROUNDS=12

# ============================================
# Redis Configuration (ElastiCache or self-hosted)
# ============================================
# CRITICAL: Use Redis with password and SSL in production
REDIS_URL=rediss://default:PASSWORD@redis-instance.xxxxx.cache.amazonaws.com:6379
REDIS_PASSWORD=REPLACE_WITH_REDIS_PASSWORD
REDIS_TTL=3600

# ============================================
# Email Service (SendGrid)
# ============================================
# CRITICAL: Use SendGrid API key from GitHub Secrets
SENDGRID_API_KEY=REPLACE_WITH_SENDGRID_API_KEY
EMAIL_FROM=noreply@portfolix.in
EMAIL_FROM_NAME=Portfolix Compass

# ============================================
# AWS S3 Configuration
# ============================================
# CRITICAL: Use AWS IAM credentials from secrets manager
AWS_REGION=ap-south-1
AWS_ACCESS_KEY_ID=REPLACE_WITH_AWS_ACCESS_KEY
AWS_SECRET_ACCESS_KEY=REPLACE_WITH_AWS_SECRET_KEY
AWS_BUCKET_NAME=portfolix-production-documents

# ============================================
# PDF Generation (Puppeteer)
# ============================================
PUPPETEER_SKIP_CHROMIUM_DOWNLOAD=true
PUPPETEER_EXECUTABLE_PATH=/usr/bin/chromium-browser

# ============================================
# Monitoring & Logging
# ============================================
# CRITICAL: Enable Sentry for error tracking
SENTRY_DSN=https://REPLACE_WITH_SENTRY_DSN@sentry.io/PROJECT_ID
LOG_LEVEL=warn

# ============================================
# Frontend URLs (CORS)
# ============================================
FRONTEND_URL=https://app.portfolix.in
FRONTEND_PROD_URL=https://app.portfolix.in

# ============================================
# Business Configuration
# ============================================
DEFAULT_HRA_PERCENTAGE=30
DEFAULT_DA_PERCENTAGE=8
DEFAULT_PF_PERCENTAGE=12
DEFAULT_ESI_PERCENTAGE=0.75
DEFAULT_COMPLIANCE_REGION=Kerala

# ============================================
# Rate Limiting (Stricter in production)
# ============================================
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
AUTH_RATE_LIMIT_MAX_ATTEMPTS=3
AUTH_RATE_LIMIT_WINDOW_MS=900000

# ============================================
# Session Configuration
# ============================================
# CRITICAL: Use strong, random session secret
SESSION_SECRET=REPLACE_WITH_SECURE_RANDOM_KEY_MIN_32_CHARS
SESSION_TIMEOUT=3600000

# ============================================
# Feature Flags (Conservative for production)
# ============================================
ENABLE_PDF_GENERATION=true
ENABLE_EMAIL_NOTIFICATIONS=true
ENABLE_SALARY_ADVANCE=false
ENABLE_REFERRAL_BONUS=true
ENABLE_DEBUG_MODE=false

# ============================================
# External API Integrations
# ============================================
DOCUSIGN_INTEGRATION_KEY=REPLACE_WITH_DOCUSIGN_KEY
DOCUSIGN_SECRET_KEY=REPLACE_WITH_DOCUSIGN_SECRET
DOCUSIGN_ACCOUNT_ID=REPLACE_WITH_DOCUSIGN_ACCOUNT_ID

# ============================================
# Deployment & Health Check
# ============================================
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=60000
